<!DOCTYPE html>
<html>
    <head>
        <title>AJAX Tests</title>
		<style>
			button
			{
				display:block;
				color: red;
			}
			.tabbed
			{
				padding-left: 1em;
			}
		</style>
       	<script src="jquery-1.9.1.min.js" type="text/javascript"></script>
		<script src="../api/rhoapi-modules.js"></script>
		<script type="text/javascript">
		var xhr;
        function callPOSTjq()
		{
			if(typeof jQuery == 'undefined')
			{
				alert('No jQuery');
				return;
			}
			$('#output').html('POSTing jQuery');
    		xhr = $.ajax({
                url: "https://cors-test.appspot.com/test",
                type: "POST",
                dataType: "json",
                data: {"hazmatCriteriaTO":"{\"localLanguageCode\":\"en_US\",\"localLocationNumber\":\"9066\",\"localLocationTypeCode\":\"9\",\"localUserId\":\"Admin\"}","mediaType":"application/json"},
                contentType: "application/json",
                success: function(e){
                    $('#output').html('Success POST: ' + JSON.stringify(e));
                },
                error: function(e){
                    $('#output').html('Error POST: ' + JSON.stringify(e));
                }
            });
        }
        function callGETjq(){
			if(typeof jQuery == 'undefined')
			{
				alert('No jQuery');
				return;
			}
			$('#output').html('GETting jQuery');
    		xhr = $.ajax({
                url: "https://cors-test.appspot.com/test",
                type: "GET",
                dataType: "json",
                data: {"hazmatCriteriaTO":"{\"localLanguageCode\":\"en_US\",\"localLocationNumber\":\"9066\",\"localLocationTypeCode\":\"9\",\"localUserId\":\"Admin\"}","mediaType":"application/json"},
                contentType: "application/json",
                success: function(e){
                    $('#output').html('Success GET: ' + JSON.stringify(e));
                },
                error: function(e){
                    $('#output').html('Error GET: ' + JSON.stringify(e));
                }
            });
        } 
		
        function callPOST()
		{
			document.getElementById('output').textContent = 'POSTing plain';
			xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function() {
				if (xhr.readyState == 4)
				{
					document.getElementById('output').textContent = 'Success POST plain: State=' + xhr.readyState + ' Status=' + xhr.status + ' ResponseText=' + xhr.responseText;
				}
				else
				{
					document.getElementById('output').textContent = 'Pending/Error POST plain: State=' + xhr.readyState;
				}
			}
			xhr.open('POST', 'https://cors-test.appspot.com/test', true);
			xhr.send(null);
        }
		
        function callGET()
		{
			xhr = new XMLHttpRequest();
			document.getElementById('output').textContent = 'GETting plain';
			xhr.onreadystatechange = function()
			{
				if (xhr.readyState == 4) {
					document.getElementById('output').textContent = 'Success GET plain: State=' + xhr.readyState + ' Status=' + xhr.status + ' ResponseText=' + xhr.responseText;
				}
				else
				{
					document.getElementById('output').textContent = 'Pending/Error GET plain: State=' + xhr.readyState;
				}
			}
			xhr.open('GET', 'https://cors-test.appspot.com/test', true);
			xhr.send(null);
        }
		
		function loadEvent()
		{
			document.getElementById('output').innerHTML = window.location.href;
			document.getElementById('output').innerHTML += '<br />jQuery.support.cors = ' + jQuery.support.cors;
			document.getElementById('output').innerHTML += '<br />jQuery.support.ajax = ' + jQuery.support.ajax + '<br />';
			
			var splitted = JSON.stringify(jQuery.ajaxSettings).split(',"');
			var intermediate = "";
			splitted.forEach(function(a)
			{
			   intermediate += '"' + a + '<br />';
			});
			splitted = intermediate.split(':{');
			intermediate = '';
			splitted.forEach(function(a)
			{
			   intermediate += ':<br />{<div class="tabbed">' + a;
			});
			splitted = intermediate.split('}');
			intermediate = '';
			splitted.forEach(function(a)
			{
			   intermediate += '</div>}' + a;
			});
			
			document.getElementById('output').innerHTML += 'jQuery.ajaxSettings = ' + intermediate;
			
			document.getElementById('output').innerHTML += 'jQuery.ajaxSettings.xhr = ' + jQuery.ajaxSettings.xhr + "<br />";
			document.getElementById('output').innerHTML += 'xhrSupported = ' + jQuery.ajaxSettings.xhr() + "<br />";
			document.getElementById('output').innerHTML += 'withCredentials = ' + ( "withCredentials" in jQuery.ajaxSettings.xhr());
		}
		window.addEventListener('load', loadEvent);
    </script>
    </head>
<body>
	<h1>AJAX JQuery 1.9.1 Min - Original</h1>
    <div>
		<button onclick="callPOSTjq()">POST jquery</button>
		<button onclick="callGETjq()">GET jquery</button>
		<button onclick="callPOST()">POST plain</button>
		<button onclick="callGET()">GET plain</button>
		<button onclick="history.back()">Back</button>
	</div>
	<div id="output"></div>
</body>
</html>